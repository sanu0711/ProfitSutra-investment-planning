{% extends "base.html" %}
{% load static %}
{% block title %}
Portfolio
{% endblock title %}

{% block main %}
<div class="container-fluid">
  <h3 class="mt-4">Welcome, ProfitSutra User!</h3>
  <p class="text-muted">AI-Driven Investment Advice & Portfolio Management</p>
    
<!-- Portfolio Addition -->
<button type="button" class="btn btn-outline-success float-end" data-bs-toggle="modal" data-bs-target="#addition">
  Add Stock
  </button>
  
  <!-- Modal -->
  <div class="modal fade" id="addition" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog  modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">Add Stock Details</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="{% url 'update_create_portfolio' %}" method="POST">
            {% csrf_token %}
            <div class="mb-3">
              <label for="stockName" class="form-label">Stock Name</label>
          
              <select name="name" class="form-select" id="stockName" required>
                <option selected disabled>Select Stock</option>
                {% for data in stock_names_option %}
                <option value="{{ data }}">{{ data }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="mb-3">
              <label for="stockQty" class="form-label">Stock Quantity</label>
              <input type="number" name="quantity" class="form-control" id="stockQty" required>
            </div>
            <div class="mb-3">
              <label for="stockPrice" class="form-label">Stock Price</label>
              <input type="number" name="price" class="form-control" id="stockPrice" required>
            </div>
            <div class="mb-3">
              <label for="stockDate" class="form-label">Stock Purchase Date</label>
              <input type="date" name="buy_date" class="form-control" id="stockDate" required>
            </div>
          
        </div>
        <div class="modal-footer">

          <button type="submit" class="btn btn-success">Submit</button>
        </form>
        </div>
      </div>
    </div>
  </div>
 <!-- Portfolio Addition End -->
  <div class="container mt-5">
    <div class="row mt-4">
      <div class="col-lg-4 col-md-6">
        <h4>Current Portfolio</h4>
        <div class="row">
          {% for data in user_stocks %}
         <!-- Card Start-->
          <div class="col-12 mb-2">
            <div class="card">
              <div class="card-body">
                <div class="d-flex justify-content-between">
                  <h5 class="mb-1">{{ data.name }}</h5>
                  <span class="text-success bg-success bg-opacity-25 py-1 px-2 rounded-pill">+5 %</span>
                </div>
                <div class="d-flex justify-content-between mt-2">
                  <small class="text-secondary">Qty: {{ data.quantity }}</small>
                  <small class="text-secondary">{{ data.buy_date }}</small>
                </div>
                
              </div>
            </div>
          </div>
          <!-- Card End-->
          {% endfor %}
        </div>

      </div>

      <div class="col-lg-8 col-md-6">
        <h4>AI-Driven Investment Advice</h4>
        <div class="row">
          <!-- Card Start-->
           <!-- Button trigger modal -->
              <button type="button" class="btn bg-white" data-bs-toggle="modal" data-bs-target="#exampleModal">
                <div class="d-flex justify-content-between">
                  <span class="fs-6 fw-bold">Manbro Industry LTD </span>
                  <span class="text-end  text-danger bg-danger bg-opacity-25 py-1 px-2 rounded-pill">
                    <i class="bi bi-graph-down-arrow "></i> Sell
                      </span>
                </div>
              </button>
  
              <!-- Modal -->
              <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg">
                  <div class="modal-content bg-light">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="exampleModalLabel">Manbro Industry LTD </h1>
  
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <!-- Card Start-->
                      <div class="card">
                        <div class="card-body">
                          <h5 class="card-title">Fundamental Analysis</h5>
                          <h6 class="card-subtitle mb-2 text-body-secondary">Fundamental Analysis of Manbro Industry LTD</h6>
                          <table class="table">
                            <thead>
                              <tr class="table-light">
                                <th scope="col">metric</th>
                                <th scope="col">sector</th>
                                <th scope="col">compA</th>
                                <th scope="col">compB</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>PE</td>
                                <td>20</td>
                                <td>25</td>
                                <td>30</td>
                              </tr>
                              <tr>
                                <td>ROE</td>
                                <td>20</td>
                                <td>25</td>
                                <td>30</td>
                              </tr>
                              <tr>
                                <td>ROCE</td>
                                <td>20</td>
                                <td>25</td>
                                <td>30</td>
                              </tr>
                              <tr>
                                <td>Debt to Equity</td>
                                <td>20</td>
                                <td>25</td>
                                <td>30</td>
                              </tr>
                              <tr>
                                <td>Dividend Yield</td>
                                <td>20</td>
                                <td>25</td>
                                <td>30</td>
                              </tr>
                            </tbody>
                          </table>
                       
                        </div>
                      </div>
                      <!-- Card End-->
  
  
                          <!-- Card Start-->
                          <div class="card mt-4">
                            <div class="card-body">
                              <h5 class="card-title">News & Sentiments</h5>
                              {% comment %} <h6 class="card-subtitle mb-2 text-body-secondary">News & Sentiments of Manbro Industry LTD</h6> {% endcomment %}
                               <div class="bg-light p-3">
                                  <h6 class="card-subtitle mb-2 text-body-secondary">News Title</h6>
                                  <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
               
                               </div>
                                    
                            </div>
                          </div>
                          <!-- Card End-->
  
                           <!-- Card Start-->
                           <div class="card mt-4">
                            <div class="card-body">
                              <h5 class="card-title">Analyst Recommendations & Ratings</h5>
                            
                               <div class="bg-light p-3">
                                  <table class="table">
                                    <thead>
                                      <tr>
                                        <th>Opinion</th>
                                        <th>	Rating</th>
                                        <th>	Target Price</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr>
                                        <td class="text-success">Positive</td>
                                        <td>4.5</td>
                                        <td>₹ 1000</td>
                                      </tr>
                                      <tr>
                                        <td class="text-warning">Neutral</td>
                                        <td>3.5</td>
                                        <td>₹ 800</td>
                                      </tr>
                                      <tr>
                                        <td class="text-danger">Negative</td>
                                        <td>2.5</td>
                                        <td>₹ 600</td>
                                      </tr>
                                   
                                  </table>
               
                               </div>
                                    
                            </div>
                          </div>
                          <!-- Card End-->
                      
                      
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      
                    </div>
                  </div>
                </div>
              </div>
           <!-- Card End-->
        </div>
          
    </div>
  </div>
</div>





{% endblock main %}
